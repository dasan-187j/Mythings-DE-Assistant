<!doctype html>
<html lang="ar" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weight Calculator</title>



  <style>
    body {
      font-family: Arial;
      padding: 0;
      margin: 0;
      background:#1e293b;
      
    }
    .nav-bar {
        background-color: #111;
        padding: 15px;
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
        box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    .table-container {
      width:50%; /* Ø±Ø¬Ø¹Ù†Ø§ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£ØµÙ„ÙŠ */
      padding:10px;
      box-sizing:border-box;
      margin: 30px;
      display: inline-block;
    }

    table {
      width:100%;
      border-collapse:collapse;
      background:white;
      direction:ltr;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      font-size:14px;
      table-layout:fixed;
    }

    a{
      color : white;
      text-decoration: none;
      margin: 0 15px;
      transition: 0.5s;
    }

    a:hover{
      color: yellow
    }

    th, td {
      border:1px solid #ccc;
      padding:4px;
      text-align:center;
      min-width:50px;
      white-space:nowrap;
    }

    th {
      background:#444;
      color:white;
      font-weight:bold;
    }

    th input[type="number"] {
      width:60px;
      font-size:13px;
      text-align:center;
      padding:2px;
    }

    td[contenteditable="true"],
.c2, .c3, .c4, .c5, .c6 {
  background: #1e293b;
  font-weight: bold;
  color: white; /* Ø§Ù„Ù†Øµ Ø£Ø¨ÙŠØ¶ */
}
    td.readonly { background:#1e293b; }

    .c2 { background:#1e293b; }
    .c3 { background:#1e293b; }
    .c4 { background:#1e293b; }
    .c5 { background:#1e293b; }
    .c6 { background:#1e293b; }

    tbody tr:nth-child(odd) { background:#fdfdfd; }
    tbody tr:nth-child(even) { background:#f6f6f6; }

    .price { background:#fff59d; font-weight:bold; border:1px solid #ffd700; }

    button {
      padding:6px 14px;
      font-size:15px;
      border:none;
      border-radius:6px;
      cursor:pointer;
    }

    #copyAll { background:#4c8bf5; color:white; }
    #copyShort { background:#34a853; color:white; }
    
    /* Ø³ØªØ§ÙŠÙ„ Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø¹Ø·Ù„ */
    .disabled-col { opacity: 0.3; background: #eee !important; }
  </style>
</head>

<body>
<div class="nav-bar">

        <a class="nav-link" href="captitalizer.html">Captitalizer</a>
        <a class="nav-link" href="Data Entry.html">Data Entry Sheets</a>
        <a class="nav-link" href="Pics Tools.html">Pics Tools</a>
      

    </div>
<div class="table-container">
  <h2 style="text-align:left; color:#f5c542;">  ğŸ§® Weight Table</h2>

  <div style="display:flex; gap:5px; margin-bottom:5px;">
    <button id="copyAll">ğŸ“‹ Copy All</button>
    <button id="copyShort">ğŸ“‹ Copy with Short Code</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>Real Price</th>
        <th>External Price</th>

        <th class="c3">
          <input id="hdr3" type="number" value="0"> g
        </th>

        <th class="c4">
          <input id="hdr4" type="number" value="0"> g
        </th>

        <th class="c5">
          <input type="checkbox" id="enable5" checked>
          <input id="hdr5" type="number" value="0"> g
        </th>

        <th class="c6">
          <input type="checkbox" id="enable6" checked>
          <input id="hdr6" type="number" value="0"> g
        </th>
      </tr>
    </thead>

    <tbody id="tbody"></tbody>
  </table>
</div>

<div class="table-container" style="width:20%;">
  
  <table>
    <thead>
      <tr>
        <th>Your Choice of Weight</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>100g</td></tr>
      <tr><td>250g</td></tr>
      <tr><td>500g</td></tr>
      <tr><td>1kg</td></tr>
      <tr><td>1.5kg</td></tr>
      <tr><td>2Kg</td></tr>
    </tbody>
<div class="table-container" style="width:20%;">
 
  <table>
    <thead>
      <tr>
        <th>Your Choice Of Size</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>160ml</td></tr>
      <tr><td>250ml</td></tr>
      <tr><td>335ml</td></tr>
      <tr><td>375ml</td></tr>
      <tr><td>500ml</td></tr>
      <tr><td>750ml</td></tr>
      <tr><td>1 L</td></tr>
    
    </tbody>
  </table>
</div>

<script>
const ROWS = 300;
const tbody = document.getElementById("tbody");

function roundCeil(n){
  if(n === 0) return "0";
  let val = Math.ceil(n * 20) / 20;
  return Number(val.toFixed(2)).toString();
}

function roundFloor(n){
  if(n === 0) return "0";
  let val = Math.floor(n * 20) / 20;
  return Number(val.toFixed(2)).toString();
}

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙÙˆÙ
for(let i=0;i<ROWS;i++){
  const tr = document.createElement("tr");

  const price = document.createElement("td");
  price.contentEditable = "true";
  price.className = "price";

  const c2 = document.createElement("td"); c2.className = "c2 readonly";
  const c3 = document.createElement("td"); c3.className = "c3 readonly";
  const c4 = document.createElement("td"); c4.className = "c4 readonly";
  const c5 = document.createElement("td"); c5.className = "c5 readonly";
  const c6 = document.createElement("td"); c6.className = "c6 readonly";

  tr.append(price,c2,c3,c4,c5,c6);
  tbody.appendChild(tr);
}

const hdr3 = document.getElementById("hdr3");
const hdr4 = document.getElementById("hdr4");
const hdr5 = document.getElementById("hdr5");
const hdr6 = document.getElementById("hdr6");
const enable5 = document.getElementById("enable5");
const enable6 = document.getElementById("enable6");

function recompute(){
  const h3 = parseFloat(hdr3.value) || 0;
  const v4 = parseFloat(hdr4.value) || 0;
  const v5 = parseFloat(hdr5.value) || 0;
  const v6 = parseFloat(hdr6.value) || 0;

  tbody.querySelectorAll("tr").forEach(tr=>{
    const price = parseFloat(tr.children[0].textContent) || 0;

    // External Price
    tr.children[1].textContent = roundCeil((h3/1000) * price);

    // Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø«Ø§Ù„Ø« Ø«Ø§Ø¨Øª = 0
    tr.children[2].textContent = "0";

    // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£ÙˆØ²Ø§Ù†
    tr.children[3].textContent = roundFloor((v4/1000)*price - (h3/1000)*price);
    
    // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ù…ÙˆØ¯ 5
    if(enable5.checked) {
        tr.children[4].textContent = roundFloor((v5/1000)*price - (h3/1000)*price);
        tr.children[4].classList.remove("disabled-col");
    } else {
        tr.children[4].textContent = "";
        tr.children[4].classList.add("disabled-col");
    }

    // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ù…ÙˆØ¯ 6
    if(enable6.checked) {
        tr.children[5].textContent = roundFloor((v6/1000)*price - (h3/1000)*price);
        tr.children[5].classList.remove("disabled-col");
    } else {
        tr.children[5].textContent = "";
        tr.children[5].classList.add("disabled-col");
    }
  });
}

[hdr3,hdr4,hdr5,hdr6,enable5,enable6].forEach(h=>{
  h.addEventListener("input",recompute);
});

tbody.addEventListener("input",recompute);

// Copy All
document.getElementById("copyAll").onclick = ()=>{
  let text = "";
  tbody.querySelectorAll("tr").forEach(tr=>{
    let row = [];
    Array.from(tr.children).forEach((td, index)=>{
      // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø¹Ø·Ù„Ø©
      if(index === 4 && !enable5.checked) return;
      if(index === 5 && !enable6.checked) return;
      
      let val = td.textContent.trim();
      if(val !== "" && val !== "0") row.push(val);
    });
    if(row.length) text += row.join("\t") + "\n";
  });
  navigator.clipboard.writeText(text.trim());
};

// Copy Short Code
document.getElementById("copyShort").onclick = () => {
  let text = "";
  tbody.querySelectorAll("tr").forEach(tr => {
    const realPrice = tr.children[0].textContent.trim();
    if (!realPrice || parseFloat(realPrice) <= 0) return;

    const col3 = tr.children[2].textContent.trim();
    const col4 = tr.children[3].textContent.trim();
    const col5 = enable5.checked ? tr.children[4].textContent.trim() : "";
    const col6 = enable6.checked ? tr.children[5].textContent.trim() : "";

    if (col3 !== "0" || col4 !== "0" || col5 !== "" || col6 !== "") {
      text += "ShortCode\t\t\t\t\t\t\t" + col3 + "\t\t" + col4 + "\t\t" + col5 + "\t\t" + col6 + "\n";
    }
  });
  navigator.clipboard.writeText(text.trim());
};
/* Enter + Paste from Excel -> distribute down */
tbody.addEventListener("keydown", function (e) {
  if (e.key === "Enter") {
    e.preventDefault();
    const td = e.target;
    if (td.tagName !== "TD") return;

    const tr = td.parentElement;
    const nextTr = tr.nextElementSibling;
    if (nextTr) {
      nextTr.children[0].focus();
    }
  }
});

tbody.addEventListener("paste", function (e) {
  const td = e.target;
  if (td.tagName !== "TD") return;

  e.preventDefault();
  const text = (e.clipboardData || window.clipboardData).getData("text");
  const values = text.split(/\r?\n/).filter(v => v.trim() !== "");

  let tr = td.parentElement;
  values.forEach((val, i) => {
    if (!tr) return;
    tr.children[0].textContent = val.trim();
    tr = tr.nextElementSibling;
  });

  recompute();
});
</script>

</body>
</html>
